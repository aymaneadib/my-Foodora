// Test scenario nº3 – Edge Case & Robustness Testing
//
// Author: Aymane Adib
//
// Tested Commands :
// LOGIN, LOGOUT, REGISTER, HELP, EXIT, CREATEDISH, CREATEMEAL, SHOWCUSTOMERS, SETSPECIALOFFER,
// REMOVEFROMSPECIALOFFER, SHOWMENUITEMS, SETPRICE, REMOVEDISH, SHOWMONEYSPENT
// CREATEORDER, ADDITEM2ORDER, ENDORDER, SHOWORDERS, SHOWDISH, SHOWMEAL, ASSOCIATECARD, DISPLAYFIDELITYCARD
// ONDUTY, OFFDUTY, ACCEPTORDER, REJECTORDER, SHOWCOURIERDELIVERIES, SHOWPOPULARRESTAURANTS, SHOWRESTAURANTS, 
// SETGENERICDISCOUNTFACTOR, SETSPECIALDISCONTFACTOR, SETPROFITPOLICY, SETDELIVERYPOLICY
// CHANGEADDRESS, CHANGEPHONENUMBER, CONSENTNOTIFICATIONS, SHOWTOTALPROFIT, SHOWRESTAURANTTOP


// Login as system manager and check help
login aymaneadib adib1234
help
logout

// Register two restaurants
register Restaurant
BurgersAndFries bnf secret 100.5 100.5
register Restaurant
TacoTown tacotown taco123 50.0 50.0

// Register two customers
register Customer
Alice Cooper acooper pass123 alice@domain.com 120.0 120.0
register Customer
Bob Marley bmarley oneLove bob@domain.com 121.0 121.0

// Register three couriers
register Courier
Courier One c1 pw 123.0 123.0
register Courier
Courier Two c2 pw 124.0 124.0
register Courier
Courier Three c3 pw 125.0 125.0

// Login as TacoTown to create dishes and meals
login tacotown taco123
createDish mainDish beefTaco 9.0 true true
createDish dessert chocoChurros 4.0 false true
createDish starter nachos 5.0 true true
createMeal fullmeal MealTaco beefTaco nachos chocoChurros
setSpecialOffer MealTaco
setPrice beefTaco 12.0
setGenericDiscountFactor -0.1              // Invalid negative discount factor
setGenericDiscountFactor 0.05              // Correct discount
removeDish nonExistentDish                 // Removing dish that doesn’t exist
removeFromSpecialOffer NotInOffer          // Removing meal not in special offer
showMenuItems
logout

// Login as Alice and make a complete order
login acooper pass123
associateCard lottery
displayFidelityCard
createOrder TacoTown
addItem2Order dish beefTaco
addItem2Order meal MealTaco
endOrder
showOrders
logout

// All couriers log in but reject the order
login c1 pw
onduty
rejectOrder
logout

login c2 pw
onduty
rejectOrder
logout

login c3 pw
onduty
rejectOrder
logout

// Another customer orders from same restaurant
login bmarley oneLove
createOrder TacoTown
addItem2Order dish beefTaco
endOrder
logout

// Test courier accepting without being on duty
login c1 pw
acceptOrder                              // Should not be accepted (off-duty)
onduty
acceptOrder                              // Accept available order
offduty
acceptOrder                              // Attempt accept after off-duty
logout

// Login BurgersAndFries and create an invalid meal
login bnf secret
createDish mainDish doubleCheese 10.0 true true
createMeal halfmeal BrokenMeal doubleCheese NonExistingDish    // Invalid meal composition
createMeal fullmeal DoubleDouble doubleCheese doubleCheese doubleCheese
createMeal halfmeal OKMeal doubleCheese doubleCheese
setspecialoffer OKMeal
showMenuItems
logout

// Customer orders dish that will be removed later
login acooper pass123
createOrder BurgersAndFries
addItem2Order dish doubleCheese
endOrder
logout

// Remove the dish from menu after customer ordered it
login bnf secret
removeDish doubleCheese
logout

// Customer attempts to order again a removed dish
login acooper pass123
createOrder BurgersAndFries
addItem2Order dish doubleCheese         // Should fail
endOrder
logout

// Manager sets invalid profit & delivery policies
login aymaneadib adib1234
setProfitPolicy -10                     // Invalid profit value
setProfitPolicy 0.3
setDeliveryPolicy overload              // Invalid delivery policy name
setDeliveryPolicy loadbalancer
showRestaurantTop
showTotalProfit
showCourierDeliveries
logout

// Update customer info with invalid inputs
login bmarley oneLove
changeAddress 200.0 200.0
changePhoneNumber abc123                // Invalid phone number
changePhoneNumber 987654321
consentNotifications maybe              // Invalid input
consentNotifications yes
logout

// Register new courier to test assignment
register Courier
Courier Late cl pw 127.0 127.0
login cl pw
onduty
acceptOrder                             // Accepts next unassigned order
logout

// Restaurant checks orders
login tacotown taco123
showOrders
logout

// Customer views
login acooper pass123
showMoneySpent
showPopularRestaurants
logout

// End session
exit
